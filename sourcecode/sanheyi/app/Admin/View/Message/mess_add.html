<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="keywords" content="java培训 , .net培训 , php培训" />
    <meta name="description" content="IT培训的龙头老大，口碑最好的XX培训" />
    <title>新增/编辑公告</title>
    <style type="text/css">
        .yi{margin-left:50px; float:left;}
        .yi li{float:left;}
        .er{float:left; margin-left:50px; margin-top:20px;}
        .er li{width:700px; color:#09F;}
        .red{color:red;}
        .san{float:left; margin-left:0; width:700px;}
        .san li{float:left; width:300px; height:40px; line-height:40px; text-align:center; margin-top:10px; color:#999;}
        .lv{color:green;}
        .beizhu{margin-left:50px; margin-top:10px; float:left;}
        .kuang{width:100%; height:100%; border:1px solid #c2c2c2;}
    </style>
    <link href="__PUBLIC__/admin/css/home.css" rel="stylesheet" type="text/css" />
    <link href="__PUBLIC__/admin/css/Style.css" rel="stylesheet" type="text/css" />
    <script src="__PUBLIC__/admin/js/jquery-3.0.0.min.js"></script>
    <script src="__PUBLIC__/admin/js/common.js"></script>
    <script src="__PUBLIC__/admin/js/jquery.form.min.js"></script>
    <script src="__PUBLIC__/admin/js/home/zhanghuxinxi.js"></script>

    <script type="text/javascript" charset="utf-8" src="__PUBLIC__/admin/js/ueditor/ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="__PUBLIC__/admin/js/ueditor/ueditor.all.min.js"> </script>

    <!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
    <!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
    <script type="text/javascript" charset="utf-8" src="__PUBLIC__/admin/js/ueditor/lang/zh-cn/zh-cn.js"></script>


</head>

<body>
<div class="beijing"><!--此处可以用行间样式加背景图，背景图长宽比例最好是跟屏幕大小一致-->
    <include file ='Public:header' />
    <include file ='Public:left' />
    <div class="you">
        <ul class="yi">
            <li><a href="{:U('public/main')}">主页</a>＞</li>
            <li>新增/编辑公告</li>
        </ul>
        <br />
        <form method="post" action="{:U('message/addDo')}" name="form" id="form">
            <ul class="san">
                <li style="text-align:right;">标题：</li>
                <li><input type="text" name="title" id="title" value="{$show_data['title']}"></li>
            </ul>
            <ul class="san">
                <li>
                    <script id="editor" type="text/plain" style="width:1024px;height:500px;"></script>
                </li>
            </ul>
            <ul>
                <input  type="hidden" id="message_id" name="message_id" value="{$show_data['message_id']}"/>
                <input  type="hidden" id="content" name="content" value="{$show_data['content']}"/>
                <li><input  id="btn_sub"  type="button" value="提交保存" onclick="sub(1)" /></li>
            </ul>
        </form>
    </div>

    <include file ='Public:foot' />
</div>

<script type="text/javascript">

    //初始化界面
    var ue = UE.getEditor('editor');

    function getAllHtml() {
        //alert(UE.getEditor('editor').getAllHtml())
        $('#content').val(UE.getEditor('editor').getAllHtml());
        alert($('#content').val())

    }
    function getContent() {
        //arr.push(UE.getEditor('editor').getContent());

        $('#content').val(UE.getEditor('editor').getPlainTxt());
        //alert($('#content').val())
    }
    function setContent(content) {

        ue.addListener("ready", function () {
            // editor准备好之后才可以使用
            ue.setContent(content);
        });
    }


    function validate_handle(){
        //todo


        //假如上面都ok了,那么将文本内容复制给隐藏域进行提交
        getContent();
        return true;
    }

    $(document).ready(function(){
        //不为空,表示是编辑
        var message_id="{$show_data['message_id']}";
        if(message_id!=''){
            setContent("{$show_data['content']}");
        }

    });

</script>

</body>
</html>
